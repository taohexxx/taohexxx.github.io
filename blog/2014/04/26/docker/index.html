<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Docker · Tao He</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="{% include JB/setup %}"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Docker · Tao He"/><meta property="og:type" content="website"/><meta property="og:url" content="https://taohexxx.github.io/blog/2014/04/26/docker"/><meta property="og:description" content="{% include JB/setup %}"/><meta property="og:image" content="https://taohexxx.github.io/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://taohexxx.github.io/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://taohexxx.github.io/blog/atom.xml" title="Tao He Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://taohexxx.github.io/blog/feed.xml" title="Tao He Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/docusaurus.svg" alt="Tao He"/><h2 class="headerTitleWithLogo">Tao He</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/doc1" target="_self">Docs</a></li><li class=""><a href="/docs/doc4" target="_self">API</a></li><li class=""><a href="/en/help" target="_self">Help</a></li><li class="siteNavGroupActive"><a href="/blog" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul><li class="navListItem"><a class="navItem" href="/blog/2019/01/13/microsoft-powerpoint">Microsoft PowerPoint</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/12/12/chrome">Chrome</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/11/21/alfred">Alfred</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/09/01/docusaurus">Docusaurus</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/08/30/git-commands">Git Commands</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2014/04/26/docker">Docker</a></h1><p class="post-meta">April 26, 2014</p><div class="authorBlock"></div></header><div><span><p>{% include JB/setup %}</p>
<h2><a class="anchor" aria-hidden="true" id="installation"></a><a href="#installation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<h3><a class="anchor" aria-hidden="true" id="ubuntu"></a><a href="#ubuntu" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ubuntu</h3>
<p><a href="https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/">Get Docker CE for Ubuntu</a></p>
<pre><code class="hljs css language-sh">sudo apt-get remove docker docker-engine docker.io
sudo apt-get update
sudo apt-get install \
    linux-image-extra-$(uname -r) \
    linux-image-extra-virtual
sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    software-properties-common
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
sudo add-apt-repository \
   <span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   <span class="hljs-variable">$(lsb_release -cs)</span> \
   stable"</span>
sudo apt-get update
sudo apt-get install docker-ce
sudo docker run hello-world
</code></pre>
<p>Manage Docker as a non-root user</p>
<pre><code class="hljs css language-sh">sudo groupadd docker
sudo usermod -aG docker <span class="hljs-variable">$USER</span>
</code></pre>
<p>Start Docker</p>
<pre><code class="hljs css language-sh">docker version
docker images
docker ps -a
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="macos"></a><a href="#macos" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>macOS</h3>
<p>Start Docker</p>
<pre><code class="hljs css language-sh"><span class="hljs-built_in">export</span> DOCKER_HOST=tcp://localhost:4243
docker
docker version
docker images
docker ps -a
</code></pre>
<p>Work</p>
<pre><code class="hljs css language-sh">docker login
docker search centos
docker search ubuntu
docker pull centos
docker pull ubuntu
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="aws"></a><a href="#aws" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWS</h3>
<pre><code class="hljs css language-sh">sudo yum install docker
sudo service docker restart
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="build-image"></a><a href="#build-image" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build Image</h2>
<pre><code class="hljs css language-sh">vim Dockerfile
docker build --rm -t app_server .
docker images
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="run-container-from-image"></a><a href="#run-container-from-image" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Run Container from Image</h2>
<p>CentOS</p>
<pre><code class="hljs css language-sh">docker run -it --name=centos_1 centos bash  <span class="hljs-comment"># run and exec shell</span>
docker <span class="hljs-built_in">exec</span> -it centos_1 bash  <span class="hljs-comment"># exec another shell</span>
</code></pre>
<p>Ubuntu</p>
<pre><code class="hljs css language-sh">docker run -it --name=ubuntu_1 ubuntu bash  <span class="hljs-comment"># run and exec shell</span>
docker <span class="hljs-built_in">exec</span> -it ubuntu_1 bash  <span class="hljs-comment"># exec another shell</span>
</code></pre>
<p>Run as daemon</p>
<pre><code class="hljs css language-sh">docker run -itd --name=ubuntu_2 ubuntu bash
docker attach ubuntu_2
<span class="hljs-comment"># press up arrow to show shell</span>
<span class="hljs-comment"># after operation, press Ctrl+P Ctrl+Q to detach</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="remove-containers-and-images"></a><a href="#remove-containers-and-images" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Remove Containers and Images</h2>
<p>docker will NOT remove dead containers. Remove them manually is needed.</p>
<p>Stop container</p>
<pre><code class="hljs css language-sh">docker stop CONTAINER_NAME_OR_ID
</code></pre>
<p>Remove container</p>
<pre><code class="hljs css language-sh">docker rm CONTAINER_NAME_OR_ID
</code></pre>
<p>Remove all stopped containers</p>
<pre><code class="hljs css language-sh">docker rm $(docker ps -a -q)
</code></pre>
<p>Remove image</p>
<pre><code class="hljs css language-sh">docker rmi IMAGE_NAME_OR_ID
</code></pre>
<p>Remove all untagged images</p>
<pre><code class="hljs css language-sh">docker rmi $(docker images | grep <span class="hljs-string">"^&lt;none&gt;"</span> | awk <span class="hljs-string">"{print <span class="hljs-variable">$3</span>}"</span>)
</code></pre>
<p><a href="http://jimhoskins.com/2013/07/27/remove-untagged-docker-images.html">Remove Untagged Images From Docker</a></p>
<h2><a class="anchor" aria-hidden="true" id="ssh"></a><a href="#ssh" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SSH</h2>
<p>In host</p>
<pre><code class="hljs css language-sh">vim Dockerfile
docker build --rm -t eg_sshd .
docker run -P --name=test_sshd eg_sshd
</code></pre>
<p>In container</p>
<pre><code class="hljs css language-sh">/usr/sbin/sshd
adduser taohe
</code></pre>
<p>In host</p>
<pre><code class="hljs css language-sh">docker port test_sshd 22
<span class="hljs-comment"># mark down the port of localhost</span>
ssh taohe@localhost -p 49154
</code></pre>
<p>In container</p>
<pre><code class="hljs css language-sh">apt-get install netcat
<span class="hljs-built_in">kill</span> 13  <span class="hljs-comment"># kill sshd to release port 22</span>
nc -p 22 -l -vv  <span class="hljs-comment"># for linux (netcat-traditional)</span>
nc 22 -l -v  <span class="hljs-comment"># for macos (netcat-openbsd)</span>
netstat -ntlp | grep nc
</code></pre>
<p>In host</p>
<pre><code class="hljs css language-sh">nc localhost 49154 -vv  <span class="hljs-comment"># for linux (netcat-traditional). no `-p`!</span>
nc localhost 49154 -v  <span class="hljs-comment"># for macos (netcat-openbsd)</span>
curl localhost:49154
</code></pre>
<p><a href="https://docs.docker.com/engine/examples/running_ssh_service/">Dockerize an SSH service</a></p>
<h2><a class="anchor" aria-hidden="true" id="macos上的docker-container与主机通讯"></a><a href="#macos上的docker-container与主机通讯" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>macOS上的Docker Container与主机通讯</h2>
<ol>
<li>确保<code>Dockerfile</code>里面暴露了端口，如<code>EXPOSE 1883</code></li>
<li><code>docker build --rm -t test_docker .</code></li>
<li><code>docker run -P -it --name=test_docker_1 test_docker bash</code></li>
<li><code>docker network inspect bridge</code>确认包含<code>test_docker_1</code>，记录IP地址</li>
<li><code>docker port test_docker_1 1883</code>或者<code>docker ps -a</code>记录端口</li>
<li>本地用地址localhost和上面记录的端口连接</li>
</ol>
<p><a href="https://www.ctl.io/developers/blog/post/docker-networking-rules/">Comparing --expose/EXPOSE and -p</a></p>
<h2><a class="anchor" aria-hidden="true" id="network"></a><a href="#network" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Network</h2>
<pre><code class="hljs css language-sh">docker network ls
docker network inspect bridge
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="shell-access"></a><a href="#shell-access" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Shell Access</h2>
<pre><code class="hljs css language-sh">docker <span class="hljs-built_in">exec</span> -it some-mysql bash
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="commit"></a><a href="#commit" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Commit</h2>
<p>Commit container changes to image</p>
<pre><code class="hljs css language-sh">docker commit CONTAINER_NAME_OR_ID IMAGE_NAME
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="file"></a><a href="#file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>File</h2>
<pre><code class="hljs css language-sh">docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-
docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="docker-hub"></a><a href="#docker-hub" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker Hub</h2>
<p>Firstly, create a repository on Docker Hub.</p>
<p>In order to push a repository to the Docker Hub, you need to name your local image using your Docker Hub username and the repository name.</p>
<pre><code class="hljs css language-sh">docker tag phx:latest phxtest/phxtest:latest
docker push phxtest/phxtest
docker pull phxtest/phxtest  <span class="hljs-comment"># test</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="clean-useless-data"></a><a href="#clean-useless-data" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Clean useless data</h2>
<p>Large data remain in <code>/var/lib/docker/aufs/</code> and <code>/var/lib/docker/volumes/</code>.</p>
<pre><code class="hljs css language-sh">docker volume ls -qf dangling=<span class="hljs-literal">true</span> | xargs -r docker volume rm
</code></pre>
<p><a href="https://lebkowski.name/docker-volumes/">https://lebkowski.name/docker-volumes/</a></p>
<h2><a class="anchor" aria-hidden="true" id="mysql"></a><a href="#mysql" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MySQL</h2>
<p>Start server</p>
<pre><code class="hljs css language-sh">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=000000 -d mysql:5.7
</code></pre>
<p>Shell access</p>
<pre><code class="hljs css language-sh">docker <span class="hljs-built_in">exec</span> -it some-mysql bash
mysql -h localhost -P 3306 -u root -p
</code></pre>
<p>If failed, view logs</p>
<pre><code class="hljs css language-sh">docker logs some-mysql
</code></pre>
<p>Start client</p>
<pre><code class="hljs css language-sh"><span class="hljs-comment"># $MYSQL_PORT_3306_TCP_ADDR is the MySQL server IP that get from</span>
<span class="hljs-comment"># `docker network inspect bridge` or</span>
<span class="hljs-comment"># `docker inspect some-mysql | grep IP`</span>
docker run -it --rm mysql:5.7 sh -c <span class="hljs-string">'exec mysql -h "$MYSQL_PORT_3306_TCP_ADDR" -P 3306 --protocol=tcp -u root -p'</span>
</code></pre>
<p><a href="https://hub.docker.com/_/mysql/">MySQL</a></p>
<h2><a class="anchor" aria-hidden="true" id="sameersbn-deprecated"></a><a href="#sameersbn-deprecated" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sameersbn (deprecated)</h2>
<p><a href="https://github.com/sameersbn/docker-mysql">https://github.com/sameersbn/docker-mysql</a></p>
<pre><code class="hljs css language-sh">docker pull sameersbn/mysql
docker stop mysql &amp;&amp; docker rm mysql
docker run --name mysql -d -p 3306:3306 -v ~/mnt:/mnt -v ~/etc/mysql:/etc/mysql -v ~/var/lib/mysql:/var/lib/mysql sameersbn/mysql
docker ps -a
docker run -it --rm --volumes-from=mysql sameersbn/mysql mysql -uroot
docker inspect mysql | grep IP
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="java"></a><a href="#java" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Java</h2>
<p><a href="https://github.com/dockerfile/java">https://github.com/dockerfile/java</a></p>
<pre><code class="hljs css language-sh">docker pull dockerfile/java
docker nohup run -it --rm -w /workspace/bin -v ~/workspace/bin:/workspace/bin dockerfile/java:oracle-java8 java -jar /workspace/bin/weibominer.jar uid 1000000000L 4 &amp;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="dive"></a><a href="#dive" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>dive</h2>
<p><a href="https://github.com/wagoodman/dive">dive</a></p>
<p>A tool for exploring each layer in a docker image</p>
<pre><code class="hljs css language-sh">brew tap wagoodman/dive
brew install dive
</code></pre>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog">Recent Posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#installation">Installation</a><ul class="toc-headings"><li><a href="#ubuntu">Ubuntu</a></li><li><a href="#macos">macOS</a></li><li><a href="#aws">AWS</a></li></ul></li><li><a href="#build-image">Build Image</a></li><li><a href="#run-container-from-image">Run Container from Image</a></li><li><a href="#remove-containers-and-images">Remove Containers and Images</a></li><li><a href="#ssh">SSH</a></li><li><a href="#macos上的docker-container与主机通讯">macOS上的Docker Container与主机通讯</a></li><li><a href="#network">Network</a></li><li><a href="#shell-access">Shell Access</a></li><li><a href="#commit">Commit</a></li><li><a href="#file">File</a></li><li><a href="#docker-hub">Docker Hub</a></li><li><a href="#clean-useless-data">Clean useless data</a></li><li><a href="#mysql">MySQL</a></li><li><a href="#sameersbn-deprecated">sameersbn (deprecated)</a></li><li><a href="#java">Java</a></li><li><a href="#dive">dive</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/docusaurus.svg" alt="Tao He" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/docs/en/doc2.html">Guides (or other categories)</a><a href="/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 Your Name or Your Company Name</section></footer></div></body></html>